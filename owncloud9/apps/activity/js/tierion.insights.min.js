/* ===================================================
 *
 * tierion.insights.js v1.0.0
 * https://tierion.com
 * ===================================================
 * Copyright 2015 Tierion
 *
 * ========================================================== */

(function () {

    var domain = "http://localhost:5001/index.php/apps/files"; 

    function n(n) { var i = this, r = "|"; i.utm_source_this_visit = ""; i.utm_medium_this_visit = ""; i.utm_term_this_visit = ""; i.utm_content_this_visit = ""; i.utm_campaign_this_visit = ""; i.user_agent_this_visit = ""; i.language_this_visit = ""; self_referring_url_this_visit = ""; i.page_views_this_visit = 0; i.visit_count_all_time = 0; i.time_on_site_seconds_this_visit = 0; i.date_first_visit_all_time = (new Date).getTime(); i.date_first_page_view_this_visit = (new Date).getTime(); i.date_last_page_view_this_visit = (new Date).getTime(); i.ParseCookieValue = function (n) { var t = []; t = n.split(r); i.utm_source_this_visit = t[0]; i.utm_medium_this_visit = t[1]; i.utm_term_this_visit = t[2]; i.utm_content_this_visit = t[3]; i.utm_campaign_this_visit = t[4]; i.user_agent_this_visit = t[5]; i.language_this_visit = t[6]; self_referring_url_this_visit = t[7]; i.page_views_this_visit = t[8]; i.visit_count_all_time = t[9]; i.time_on_site_seconds_this_visit = t[10]; i.date_first_visit_all_time = t[11]; i.date_first_page_view_this_visit = t[12]; i.date_last_page_view_this_visit = t[13] }; i.PreviousVisitHasExpired = function () { var n = parseInt(i.date_last_page_view_this_visit) + 18e5, t = (new Date).getTime(); return t > n }; i.StartNewVisit = function () { i.utm_source_this_visit = t("utm_source"); i.utm_medium_this_visit = t("utm_medium"); i.utm_term_this_visit = t("utm_term"); i.utm_content_this_visit = t("utm_content"); i.utm_campaign_this_visit = t("utm_campaign"); i.user_agent_this_visit = navigator.userAgent; i.language_this_visit = navigator.language; self_referring_url_this_visit = document.referrer; i.page_views_this_visit = 1; i.visit_count_all_time++; i.time_on_site_seconds_this_visit = 0; i.date_first_page_view_this_visit = (new Date).getTime(); i.date_last_page_view_this_visit = (new Date).getTime() }; i.UpdateThisVisit = function () { i.page_views_this_visit++; i.date_last_page_view_this_visit = (new Date).getTime(); i.time_on_site_seconds_this_visit = Math.round((i.date_last_page_view_this_visit - i.date_first_page_view_this_visit) / 1e3) }; i.ToCookieValueString = function () { var n = []; return n[0] = i.utm_source_this_visit.replace(r, "/"), n[1] = i.utm_medium_this_visit.replace(r, "/"), n[2] = i.utm_term_this_visit.replace(r, "/"), n[3] = i.utm_content_this_visit.replace(r, "/"), n[4] = i.utm_campaign_this_visit.replace(r, "/"), n[5] = i.user_agent_this_visit.replace(r, "/"), n[6] = i.language_this_visit.replace(r, "/"), n[7] = self_referring_url_this_visit.replace(r, "/"), n[8] = i.page_views_this_visit, n[9] = i.visit_count_all_time, n[10] = i.time_on_site_seconds_this_visit, n[11] = i.date_first_visit_all_time, n[12] = i.date_first_page_view_this_visit, n[13] = i.date_last_page_view_this_visit, n.join(r) }; typeof n != "undefined" ? i.ParseCookieValue(n) : i.StartNewVisit() } function o() { return h("__trnData") } function s(n) { c("__trnData", n, 5256e3) } function h(n) { var r = document.cookie.indexOf(n + "="), i, t; return r != -1 ? (i = r + n.length + 1, t = document.cookie.indexOf(";", i), t == -1 && (t = document.cookie.length), unescape(document.cookie.substring(i, t))) : "" } function c(n, t, i) { var r = new Date, u; r.setTime(r.getTime() + i * 6e4); u = n + "=" + escape(t) + (i > 0 ? "; path=/; domain=" + e + "; expires=" + r.toGMTString() : ""); document.cookie = u } function t(n) { n = n.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]"); var i = new RegExp("[\\?&]" + n + "=([^&#]*)"), t = i.exec(location.search); return t === null ? "" : decodeURIComponent(t[1].replace(/\+/g, " ")) } var e = domain, f = o(), n, r, i, u; for (f == "" ? n = new n : (n = new n(f), n.PreviousVisitHasExpired() ? n.StartNewVisit() : n.UpdateThisVisit()), s(n.ToCookieValueString()), r = document.querySelectorAll('form[method="post"][action$="tierion.com/form/submit"]'), i = 0; i < r.length; i++) u = r[i], u.onsubmit = function () { var t = document.createElement("input"); t.setAttribute("name", "_trnData"); t.setAttribute("type", "hidden"); t.setAttribute("value", n.ToCookieValueString()); u.appendChild(t) }
})();

